#!/usr/bin/perl
# This script takes null delimited files as input
# it drops paths that match the listed exclusions
# output is null delimited to match input
use File::Basename;
my $dirname = dirname(__FILE__);

my @excludes;
open EXCLUDES, '<', $dirname.'/excludes.txt';
while (<EXCLUDES>) {
  s/^\s*(.*)\s*$/$1/;
  push @excludes, $_;
}
$/="\0";
my $exclude = join "|", @excludes;
while (<>) {
  chomp;
  next if m{$exclude};
  print "$_$/";
}
